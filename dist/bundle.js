!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(1),e.exports=n(2)},function(e,t,n){e.exports=n.p+"bundle.css"},function(e,t,n){"use strict";!function(e){function t(e){console.log("on_button_click",e,e.currentTarget),e.preventDefault();var t=e.currentTarget,n=void 0;t.classList.contains("inactive")||(n="button:"+t.id,t.classList.contains("on")?(t.classList.remove("on"),t.classList.add("off"),console.log(n+":off"),document.dispatchEvent(new CustomEvent(n+":off",e))):(t.classList.add("on"),t.classList.remove("off"),console.log(n+":on"),document.dispatchEvent(new CustomEvent(n+":on",e))),console.log(n+":toggle"),document.dispatchEvent(new CustomEvent(n+":toggle",e)))}function n(t){console.log("on_paging_click",t);var n=t.currentTarget;if(t.preventDefault(),n.classList.contains("inactive"))return!1;try{e.nodes.body.classList.add("openlayers-loading"),document.dispatchEvent(new CustomEvent("load:sequence",{detail:{operation:t.currentTarget.dataset.operation}}))}catch(t){console.log(t)}}function o(){var e=document.documentElement,t=document.querySelector(".top"),n=document.querySelector("#button-metadata");n&&n.classList.remove("on"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen(),t&&n.classList.add("hidden")}function a(){var e=document.querySelector("a.fullscreen"),t=document.querySelector(".top");document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),console.log("click fullscreenOff: @todo blur()"),e&&console.log(e),t&&t.classList.remove("hidden")}function l(t){console.log("loadSequence");try{var n=t.detail.operation;e.isFullyLoaded=!0;var o=e.nodes.osd,a=o.dataset,l=a.type,s=a.identifier,r=(a.view,a.service),i=parseInt(o.dataset.sequence,10),d=parseInt(o.dataset.sequenceCount,10),c=[];"decrease"==n&&((i-=1)<1&&(i=1),c[0]=i,console.log("decrease",i)),"increase"==n&&((i+=1)>d&&(i=d),"single"==o.dataset.view?c[0]=i:i%2==1?(c[0]=i,c[1]=i+1):(c[0]=i-1,c[1]=i)),"toggleview"==n&&("single"==o.dataset.view?(o.dataset.view="doublepage",i%2==1?(c[0]=i,c[1]=i+1):(c[0]=i-1,c[1]=i)):(o.dataset.view="single",c[0]=i)),"change"==n&&(c[0]=i),o.dataset.sequence=i,e.nodes.loadingMsg.textContent=c.join(" - "),e.nodes.slider.value=i,e.nodes.slider_value.value=i,e.nodes.slider_value.value=i;var u=c.map((function(e,t){return{tileSource:r+"/"+l+"/"+s+"/"+e+"/info.json",x:t}}));e.nodes.next.forEach((function(e){i>=d?e.classList.add("inactive"):e.classList.contains("inactive")&&e.classList.remove("inactive")})),e.nodes.previous.forEach((function(e){i<=1?e.classList.add("inactive"):e.classList.contains("inactive")&&e.classList.remove("inactive")})),window.history.pushState({},"some title",c[0].toString()),e.show("#openseadragon1"),e.show("#pager"),e.Viewer.open(u),e.nodes.body.classList.remove("openlayers-loading")}catch(t){console.log(t)}}function s(){var e=document.querySelector("#button-metadata"),t=document.querySelector("#pagemeta");t.classList.remove("hidden"),e.classList.remove("off"),e.classList.add("on"),t.closest(".pane-body").classList.remove("pagemeta-hidden")}function r(){var e=document.querySelector("#button-metadata"),t=document.querySelector("#pagemeta");e.classList.remove("on"),e.classList.add("off"),t.classList.add("hidden"),t.closest(".pane-body").classList.add("pagemeta-hidden")}function i(){body.classList.contains("openlayers-loading")?setTimeout((function(){i()}),100):(e.hide(".pane.load"),e.nodes.body.classList.remove("openlayers-loading"))}function d(e){console.log("onPjaxLoadAvailable",e)}function c(t){t.item.addHandler("fully-loaded-change",(function(){var t=function(){for(var t=e.Viewer.world.getItemCount(),n=0;n<t;n++){if(!e.Viewer.world.getItemAt(n).getFullyLoaded())return!1}return!0}();t!==e.isFullyLoaded&&(e.isFullyLoaded=t,e.isFullyLoaded&&(e.nodes.body.classList.remove("openlayers-loading"),e.hide(".pane.load")))}))}function u(){var t=e.nodes.osd;e.nodes.html.style.overflow="initial",e.show("#"+t.id),e.show("#pager"),e.hide("#thumbnails")}function m(){var t=e.nodes.osd.dataset,n=(t.id,t.uri),o=e.nodes.thumbnails.dataset.state;e.hide("#openseadragon1"),e.hide("#pager"),e.nodes.html.style.overflow="initial",e.show("#thumbnails"),0===parseInt(o,10)&&axios.get(n+"/thumbnails?pjax=true&width=230&height=150").then((function(t){if(200===t.status){var n=(new DOMParser).parseFromString(t.data,"text/html");e.nodes.thumbnails.appendChild(n.querySelector(".thumbnails.container")),document.querySelectorAll(".thumbnails.container a").forEach((function(e){e.addEventListener("click",v)})),e.nodes.thumbnails.dataset.state=1}})).catch((function(e){console.log(e)}))}function v(t){t.preventDefault();var n=t.currentTarget;e.nodes.osd.dataset.sequence=n.dataset.sequence,e.nodes.buttonThumbnails.classList.contains("on")&&(e.nodes.buttonThumbnails.classList.remove("on"),e.nodes.buttonThumbnails.classList.add("off")),e.nodes.html.style.overflow="hidden",e.hide("#thumbnails"),document.dispatchEvent(new CustomEvent("load:sequence",{detail:{operation:"change"}}))}function f(t){console.log("slide_value_change",t,t.currentTarget.value),e.nodes.osd.dataset.sequence=t.currentTarget.value,document.dispatchEvent(new CustomEvent("load:sequence",{detail:{operation:"change"}}))}e.OpenSeadragon=OpenSeadragon,e.Viewer=null,e.isFullyLoaded=!1,e.show=function(e){document.querySelectorAll(e).forEach((function(e){e.style.display=null,e.style.visibility=null,e.hidden=null}))},e.hide=function(e){document.querySelectorAll(e).forEach((function(e){e.style.display="none",e.style.visibility="hidden",e.setAttribute("hidden",!0)}))},e.delegate=function(e,t,n,o){var a=document.querySelectorAll(e),l=!0,s=!1,r=void 0;try{for(var i,d=a[Symbol.iterator]();!(l=(i=d.next()).done);l=!0)element=i.value,element.addEventListener(t,(function(e){e.target.matches(n)&&o(e)}))}catch(e){s=!0,r=e}finally{try{!l&&d.return&&d.return()}finally{if(s)throw r}}},window.addEventListener("load",(function(){e.nodes={html:document.querySelector("html"),body:document.querySelector("body"),thumbnails:document.querySelector("#thumbnails"),buttonMetadata:document.querySelector("#button-metadata"),pagemeta:document.querySelector("#pagemeta"),osd:document.querySelector("#openseadragon1"),display:document.getElementById("#display"),togglePage:document.getElementById("toggle-page"),controlZoomOut:document.getElementById("control-zoom-out"),controlZoomIn:document.getElementById("control-zoom-in"),toggleLanguage:document.querySelector("body .language"),slider:document.querySelector("#range_weight"),slider_value:document.querySelector("#slider_value"),loadingMsg:document.querySelector(".current_page"),buttonThumbnails:document.getElementById("button-thumbnails"),next:document.querySelectorAll(".paging.next"),previous:document.querySelectorAll(".paging.previous")},document.dispatchEvent(new CustomEvent("viewer:contentready"));var v=e.nodes.osd.dataset.manifest.split(",").map((function(e,t){return{tileSource:e,x:t}}));e.Viewer=e.OpenSeadragon({id:e.nodes.osd.id,preserveViewport:!0,showNavigationControl:!1,showZoomControl:!1,showHomeControl:!1,showFullPageControl:!1,visibilityRatio:1,minZoomLevel:0,defaultZoomLevel:0,sequenceMode:!1,tileSources:v}),e.Viewer.world.addHandler("add-item",c),e.nodes.controlZoomIn.onclick=function(){var t=e.Viewer.viewport.getZoom();t<e.Viewer.viewport.getMaxZoom()&&e.Viewer.viewport.zoomTo(2*t)},e.nodes.controlZoomOut.onclick=function(){var t=e.Viewer.viewport.getZoom(),n=e.Viewer.viewport.getMinZoom(),o=t/2;o>=n?e.Viewer.viewport.zoomTo(o):t>n&&e.Viewer.viewport.zoomTo(n)},e.nodes.togglePage.onclick=function(e){e.preventDefault(),document.dispatchEvent(new CustomEvent("load:sequence",{detail:{operation:e.currentTarget.dataset.operation}}))},document.querySelectorAll("a.paging").forEach((function(e){e.addEventListener("click",n)})),document.querySelectorAll("a.button").forEach((function(e){e.addEventListener("click",t)})),e.nodes.slider.addEventListener("change",f),document.addEventListener("load:sequence",l),document.addEventListener("button:button-metadata:on",s),document.addEventListener("button:button-metadata:off",r),document.addEventListener("button:button-fullscreen:on",o),document.addEventListener("button:button-fullscreen:off",a),document.addEventListener("pjax:load:available",d),document.addEventListener("viewer:contentready",i),document.addEventListener("button:button-thumbnails:on",m),document.addEventListener("button:button-thumbnails:off",u),e.delegate("body","change","select",(function(e){var t=e.target;axios.get(t.value).then((function(e){if(200===e.status){var t=(new DOMParser).parseFromString(e.data,"text/html"),n=document.querySelector(".view-mode-metadata"),o=t.querySelector(".view-mode-metadata"),a=document.querySelector(".pane.main");document.querySelector("html").dir=o.dataset.dir,a.dir=o.dataset.dir,n.dir=o.dataset.dir,n.innerHTML=o.innerHTML}})).catch((function(e){console.log(e)}))}))}))}({})}]);